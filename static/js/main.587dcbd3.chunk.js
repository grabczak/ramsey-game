(this["webpackJsonpramsey-game"]=this["webpackJsonpramsey-game"]||[]).push([[0],{198:function(e,r,t){e.exports=t(355)},203:function(e,r,t){},209:function(e,r,t){},218:function(e,r,t){},352:function(e,r,t){},355:function(e,r,t){"use strict";t.r(r);var n=t(0),a=t.n(n),o=t(77),i=t.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(203);var u=t(8),l=t(57),c=t(190),d=t(191),m=t(195),s=t(15),g=function(e){for(var r=[],t=[],n=0;n<e;n++)r.push({id:n});for(var a=0;a<e;a++)for(var o=a+1;o<e;o++)t.push({source:r[a].id,target:r[o].id,team:null});return{nodes:r,edges:t}},f=Object(s.a)({},g(10),{targetCliqueSize:4,isGameRunning:!1,whoIsMoving:"player",winner:null}),v=Object(l.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"SET_GRAPH_SIZE":return Object(s.a)({},e,{},g(r.payload.size),{targetCliqueSize:Math.min(e.targetCliqueSize,r.payload.size),whoIsMoving:"player",winner:null});case"SET_TARGET_CLIQUE_SIZE":return Object(s.a)({},e,{},g(e.nodes.length),{targetCliqueSize:r.payload.size,whoIsMoving:"player",winner:null});case"START_GAME":return Object(s.a)({},e,{edges:e.edges.map((function(e){return Object(s.a)({},e,{team:null})})),isGameRunning:!0,whoIsMoving:"player",winner:null});case"END_GAME":return Object(s.a)({},e,{edges:r.payload.winner?e.edges:e.edges.map((function(e){return Object(s.a)({},e,{team:null})})),isGameRunning:!1,winner:r.payload.winner});case"NEXT_MOVE":return Object(s.a)({},e,{edges:[].concat(Object(m.a)(e.edges.filter((function(e){return e.source!==r.payload.edge.source||e.target!==r.payload.edge.target}))),[r.payload.edge]),whoIsMoving:"player"===r.payload.edge.team?"computer":"player"});default:return e}}}),p=Object(d.createLogger)({collapsed:!0}),y=Object(l.d)(v,Object(l.a)(c.a,p)),h=(t(209),t(192)),b=(t(218),function(e){var r=e.id;return a.a.createElement("div",{className:"node"},a.a.createElement("p",null,r+1))}),E=t(117),w=t.n(E),j=t(81),N=t(194),M=t(220),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"END_GAME",payload:{winner:e}}},S=function(e){return{type:"NEXT_MOVE",payload:{edge:e}}},k=function(){var e=Object(u.c)((function(e){return e.game.nodes})),r=Object(u.c)((function(e){return e.game.edges})),t=Object(u.c)((function(e){return e.game.isGameRunning})),o=Object(u.c)((function(e){return e.game.whoIsMoving})),i=Object(u.c)((function(e){return e.game.winner})),l=Object(u.b)(),c=Object(n.useMemo)((function(){return e.map((function(r){var t=e.length,n=r.id;return{id:String(n+Math.random()),x:200*Math.cos(-2*Math.PI*n/t+Math.PI/2)+250,y:-200*Math.sin(-2*Math.PI*n/t+Math.PI/2)+250}}))}),[e]),d=Object(n.useMemo)((function(){return r.map((function(e){var r,t;return{source:null===(r=c.find((function(r){var t=r.id;return Math.floor(Number(t))===e.source})))||void 0===r?void 0:r.id,target:null===(t=c.find((function(r){var t=r.id;return Math.floor(Number(t))===e.target})))||void 0===t?void 0:t.id,color:"player"===e.team?"green":"computer"===e.team?"red":"gray"}}))}),[c,r]),m={nodes:c,links:d};return a.a.createElement("div",{className:"graph"},a.a.createElement(h.Graph,{id:"graph",data:m,config:{node:{viewGenerator:function(e){var r=e.id;return a.a.createElement(b,{id:Math.floor(Number(r))})},renderLabel:!1},link:{strokeWidth:3},staticGraph:!0,width:500,height:500},onClickLink:function(e,t){var n=Math.floor(Number(e)),a=Math.floor(Number(t));if("computer"!==o&&!i){var u=r.find((function(e){return e.source===n&&e.target===a}));(null===u||void 0===u?void 0:u.team)||l(function(e,r){return function(){var t=Object(N.a)(w.a.mark((function t(n,a){var o,i,u,l,c,d,m,g,f;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a().game.targetCliqueSize,n(S({source:e,target:r,team:"player"})),i=a().game.nodes.map((function(e){return e.id})),u=a().game.edges.filter((function(e){return"player"===e.team})).map((function(e){return[e.source,e.target]})),l=a().game.edges.filter((function(e){return"computer"===e.team})).map((function(e){return[e.source,e.target]})),c=a().game.edges.filter((function(e){return null===e.team})),(d=new M.Graph).addNodesFrom(i),d.addEdgesFrom(u),M.graphCliqueNumber(d)!==o){t.next=12;break}return n(O("player")),t.abrupt("return");case 12:if((m=new M.Graph).addNodesFrom(i),m.addEdgesFrom(l),g=function(e,r){return c.some((function(t){return t.source===e&&t.target===r}))},!((f=function(){var e=!0,r=!1,t=void 0;try{for(var n,a=i[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var f=n.value,v=!0,p=!1,y=void 0;try{for(var h,b=i[Symbol.iterator]();!(v=(h=b.next()).done);v=!0){var E=h.value;if(!(f>=E)){var w=new M.Graph;if(w.addNodesFrom(i),w.addEdgesFrom(l),w.addEdge(f,E),g(f,E)&&M.graphCliqueNumber(w)===o)return{source:f,target:E,team:"computer",winningEdge:!0}}}}catch(Le){p=!0,y=Le}finally{try{v||null==b.return||b.return()}finally{if(p)throw y}}}}catch(Le){r=!0,t=Le}finally{try{e||null==a.return||a.return()}finally{if(r)throw t}}var N=!0,O=!1,S=void 0;try{for(var k,G=i[Symbol.iterator]();!(N=(k=G.next()).done);N=!0){var I=k.value,x=!0,C=!1,z=void 0;try{for(var T,R=i[Symbol.iterator]();!(x=(T=R.next()).done);x=!0){var _=T.value;if(!(I>=_)){var A=new M.Graph;if(A.addNodesFrom(i),A.addEdgesFrom(u),A.addEdge(I,_),g(I,_)&&M.graphCliqueNumber(A)===o)return{source:I,target:_,team:"computer",winningEdge:!1}}}}catch(Le){C=!0,z=Le}finally{try{x||null==R.return||R.return()}finally{if(C)throw z}}}}catch(Le){O=!0,S=Le}finally{try{N||null==G.return||G.return()}finally{if(O)throw S}}var q=M.degree(d),F=Array.from(q).sort((function(e,r){return e[1]-r[1]})),L=M.degree(m),P=Array.from(L).sort((function(e,r){return r[1]-e[1]}));if(3===o){if(0===l.length){var H=Object(j.a)(u[0],2),Z=H[0],B=H[1],W=c.filter((function(e){return e.source===Z||e.source===B||e.target===Z||e.target===B})),D=W[Math.floor(Math.random()*W.length)];return Object(s.a)({},D,{team:"computer",winningEdge:!1})}var J=!0,K=!1,Q=void 0;try{for(var U,V=P[Symbol.iterator]();!(J=(U=V.next()).done);J=!0){var X=U.value,$=!0,Y=!1,ee=void 0;try{for(var re,te=F[Symbol.iterator]();!($=(re=te.next()).done);$=!0){var ne=re.value,ae=[X[0],ne[0]].sort(),oe=Object(j.a)(ae,2),ie=oe[0],ue=oe[1];if(g(ie,ue))return{source:ie,target:ue,team:"computer",winningEdge:!1}}}catch(Le){Y=!0,ee=Le}finally{try{$||null==te.return||te.return()}finally{if(Y)throw ee}}}}catch(Le){K=!0,Q=Le}finally{try{J||null==V.return||V.return()}finally{if(K)throw Q}}}if(4===o){if(0===l.length)return Object(s.a)({},c[Math.floor(Math.random()*c.length)],{team:"computer",winningEdge:!1});if(P[0][1]<4){var le=!0,ce=!1,de=void 0;try{for(var me,se=P[Symbol.iterator]();!(le=(me=se.next()).done);le=!0){var ge=me.value,fe=!0,ve=!1,pe=void 0;try{for(var ye,he=F[Symbol.iterator]();!(fe=(ye=he.next()).done);fe=!0){var be=ye.value,Ee=[ge[0],be[0]].sort(),we=Object(j.a)(Ee,2),je=we[0],Ne=we[1];if(g(je,Ne))return{source:je,target:Ne,team:"computer",winningEdge:!1}}}catch(Le){ve=!0,pe=Le}finally{try{fe||null==he.return||he.return()}finally{if(ve)throw pe}}}}catch(Le){ce=!0,de=Le}finally{try{le||null==se.return||se.return()}finally{if(ce)throw de}}}if(4===l.length){var Me=!0,Oe=!1,Se=void 0;try{for(var ke,Ge=i[Symbol.iterator]();!(Me=(ke=Ge.next()).done);Me=!0){var Ie=ke.value,xe=!0,Ce=!1,ze=void 0;try{for(var Te,Re=i[Symbol.iterator]();!(xe=(Te=Re.next()).done);xe=!0){var _e=Te.value;if(!(Ie>=_e)){var Ae=new M.Graph;if(Ae.addNodesFrom(i),Ae.addEdgesFrom(l),Ae.addEdge(Ie,_e),g(Ie,_e)&&3===M.graphCliqueNumber(Ae))return{source:Ie,target:_e,team:"computer",winningEdge:!1}}}}catch(Le){Ce=!0,ze=Le}finally{try{xe||null==Re.return||Re.return()}finally{if(Ce)throw ze}}}}catch(Le){Oe=!0,Se=Le}finally{try{Me||null==Ge.return||Ge.return()}finally{if(Oe)throw Se}}}for(var qe=0;qe<P.length;qe++)for(var Fe=0;Fe<P.length;Fe++)if(0!==qe&&0!==Fe&&g(P[qe][0],P[Fe][0]))return{source:P[qe][0],target:P[Fe][0],team:"computer",winningEdge:!1}}return Object(s.a)({},c[Math.floor(Math.random()*c.length)],{team:"computer",winningEdge:!1})}()).winningEdge||f.source||f.target)){t.next=27;break}if(a().game.isGameRunning){t.next=21;break}return t.abrupt("return");case 21:if(n(S(f)),!f.winningEdge){t.next=25;break}return n(O("computer")),t.abrupt("return");case 25:t.next=29;break;case 27:return n(O("draw")),t.abrupt("return");case 29:0===a().game.edges.filter((function(e){return null===e.team})).length&&n(O("draw"));case 31:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(n,a))}}}),!t&&a.a.createElement("div",{className:"overlay"}))},G=(t(352),function(){var e=Object(u.c)((function(e){return e.game.nodes.length})),r=Object(u.c)((function(e){return e.game.targetCliqueSize})),t=Object(u.c)((function(e){return e.game.isGameRunning})),o=Object(u.c)((function(e){return e.game.whoIsMoving})),i=Object(u.c)((function(e){return e.game.winner})),l=Object(u.b)();Object(n.useEffect)((function(){var e=document.getElementById("loading"),r=setInterval((function(){e&&(e.innerHTML.length<=2?e.innerHTML+=".":e.innerHTML="")}),500);return function(){clearInterval(r)}}),[o]);return a.a.createElement("div",{className:"form"},a.a.createElement("div",{className:"row"},a.a.createElement("p",{className:"field"},"Rozmiar grafu:"),a.a.createElement("p",{className:"value"},e),a.a.createElement("input",{className:"field",type:"range",value:e,onChange:function(e){l({type:"SET_GRAPH_SIZE",payload:{size:Number(e.target.value)}})},disabled:t,min:4,max:10})),a.a.createElement("div",{className:"row"},a.a.createElement("p",{className:"field"},"Rozmiar szukanej kliki:"),a.a.createElement("p",{className:"value"},r),a.a.createElement("input",{className:"field",type:"range",value:r,onChange:function(e){l({type:"SET_TARGET_CLIQUE_SIZE",payload:{size:Number(e.target.value)}})},disabled:t,min:3,max:e})),a.a.createElement("div",{className:"buttonsContainer"},a.a.createElement("button",{className:"button",onClick:function(){l({type:"START_GAME"})},disabled:t},"Rozpocznij gr\u0119"),a.a.createElement("button",{className:"button",onClick:function(){l(O())},disabled:!t},"Zako\u0144cz gr\u0119")),i?a.a.createElement("p",{className:"loading",style:{color:"player"===i?"green":"computer"===i?"red":"blue"}},"player"===i?"Cz\u0142owiek wygrywa":"computer"===i?"Komputer wygrywa":"Remis"):t?a.a.createElement("p",{className:"loading"},"computer"===o?"Komputer my\u015bli":"Twoja kolej","computer"===o&&a.a.createElement("span",{id:"loading"})):null)});i.a.render(a.a.createElement((function(){return a.a.createElement(u.a,{store:y},a.a.createElement("div",{className:"app"},a.a.createElement("h1",null,"Gra Ramseya"),a.a.createElement(G,null),a.a.createElement(k,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[198,1,2]]]);
//# sourceMappingURL=main.587dcbd3.chunk.js.map