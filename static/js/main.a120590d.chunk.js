(this["webpackJsonpramsey-game"]=this["webpackJsonpramsey-game"]||[]).push([[0],{197:function(e,t,n){e.exports=n(354)},202:function(e,t,n){},208:function(e,t,n){},217:function(e,t,n){},351:function(e,t,n){},354:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(77),i=n.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(202);var c=n(9),u=n(57),l=n(189),s=n(190),m=n(15),d={isGameRunning:!1,isComputerTurn:!1,winner:null},p=n(194),f=Object(m.a)({},g(6));function g(e){for(var t=[],n=[],r=0;r<e;r++)t.push({id:String(r+1+Math.random()),x:200*Math.cos(-2*Math.PI*r/e+Math.PI/2)+250,y:-200*Math.sin(-2*Math.PI*r/e+Math.PI/2)+250});for(var a=0,o=t;a<o.length;a++){var i=o[a],c=!0,u=!1,l=void 0;try{for(var s,m=t[Symbol.iterator]();!(c=(s=m.next()).done);c=!0){var d=s.value;Number(i.id)<Number(d.id)&&n.push({source:i.id,target:d.id,color:"#CCCCCC"})}}catch(p){u=!0,l=p}finally{try{c||null==m.return||m.return()}finally{if(u)throw l}}}return{nodes:t,links:n}}var h={graphSize:6,targetCliqueSize:3};var b=Object(u.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_GAME":return Object(m.a)({},e,{isGameRunning:!0,winner:null});case"END_GAME":return Object(m.a)({},e,{isGameRunning:null!==t.payload.winner,isComputerTurn:!1,winner:t.payload.winner});case"ADD_EDGE":return Object(m.a)({},e,{isComputerTurn:"player"===t.payload.affiliation});default:return e}},graph:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GRAPH_SIZE":return Object(m.a)({},e,{},g(t.payload.size));case"ADD_EDGE":return Object(m.a)({},e,{links:[].concat(Object(p.a)(e.links.filter((function(e){return e.source!==t.payload.source||e.target!==t.payload.target}))),[{source:t.payload.source,target:t.payload.target,color:"player"===t.payload.affiliation?"green":"red"}])});case"END_GAME":return Object(m.a)({},e,{links:null===t.payload.winner?e.links.map((function(e){return Object(m.a)({},e,{color:"#CCCCCC"})})):e.links});default:return e}},options:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GRAPH_SIZE":return Object(m.a)({},e,{graphSize:t.payload.size,targetCliqueSize:Math.min(e.targetCliqueSize,t.payload.size)});case"SET_TARGET_CLIQUE_SIZE":return Object(m.a)({},e,{targetCliqueSize:t.payload.size});default:return e}}}),E=Object(s.createLogger)({collapsed:!0}),v=Object(u.d)(b,Object(u.a)(l.a,E)),y=(n(208),n(191)),C=(n(217),function(e){var t=e.id;return a.a.createElement("div",{className:"node"},a.a.createElement("p",null,Math.floor(Number(t))))}),w=n(116),N=n.n(w),j=n(193),k=function(e){return new Promise((function(t){setTimeout(t,1e3*e)}))},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"END_GAME",payload:{winner:e}}},M=n(219),G=function(e,t,n){return{type:"ADD_EDGE",payload:{source:e,target:t,affiliation:n}}},S=function(){var e={node:{renderLabel:!1,viewGenerator:function(e){return a.a.createElement(C,{id:e.id})}},link:{strokeWidth:3},staticGraph:!0,width:500,height:500},t=Object(c.c)((function(e){return e.graph})),n=Object(c.c)((function(e){return e.game.isGameRunning})),r=Object(c.c)((function(e){return e.game.isComputerTurn})),o=Object(c.c)((function(e){return e.game.winner})),i=Object(c.b)();return a.a.createElement("div",{className:"graph"},a.a.createElement(y.Graph,{id:"graph",data:t,config:e,onClickLink:function(e,n){if(!r&&!o){var a=t.links.find((function(t){return t.source===e&&t.target===n}));"#CCCCCC"===(null===a||void 0===a?void 0:a.color)&&i(function(e,t){return function(){var n=Object(j.a)(N.a.mark((function n(r,a){var o,i,c,u;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r(G(e,t,"player")),(o=new M.Graph).addNodesFrom(a().graph.nodes.map((function(e){return Math.floor(Number(e.id))}))),o.addEdgesFrom(a().graph.links.filter((function(e){return"green"===e.color})).map((function(e){return[Math.floor(Number(e.source)),Math.floor(Number(e.target))]}))),M.graphCliqueNumber(o)!==a().options.targetCliqueSize){n.next=7;break}return r(O("player")),n.abrupt("return");case 7:if(i=a().graph.links.filter((function(e){return"#CCCCCC"===e.color})),!(c=i[Math.floor(Math.random()*i.length)])){n.next=15;break}return n.next=12,k(2);case 12:r(G(c.source,c.target,"computer")),n.next=17;break;case 15:return r(O("draw")),n.abrupt("return");case 17:if((u=new M.Graph).addNodesFrom(a().graph.nodes.map((function(e){return Math.floor(Number(e.id))}))),u.addEdgesFrom(a().graph.links.filter((function(e){return"red"===e.color})).map((function(e){return[Math.floor(Number(e.source)),Math.floor(Number(e.target))]}))),M.graphCliqueNumber(u)!==a().options.targetCliqueSize){n.next=23;break}return r(O("computer")),n.abrupt("return");case 23:0===a().graph.links.filter((function(e){return"#CCCCCC"===e.color})).length&&r(O("draw"));case 25:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(e,n))}},y:!0}),!n&&a.a.createElement("div",{className:"overlay"}))},z=(n(351),function(){var e=Object(c.c)((function(e){return e.options.graphSize})),t=Object(c.c)((function(e){return e.options.targetCliqueSize})),n=Object(c.c)((function(e){return e.game.isGameRunning})),o=Object(c.c)((function(e){return e.game.isComputerTurn})),i=Object(c.c)((function(e){return e.game.winner})),u=Object(c.b)();Object(r.useEffect)((function(){var e=document.getElementById("loading"),t=setInterval((function(){e&&(e.innerHTML.length<=2?e.innerHTML+=".":e.innerHTML="")}),500);return function(){clearInterval(t)}}),[o]);return a.a.createElement("div",{className:"form"},a.a.createElement("div",{className:"row"},a.a.createElement("p",{className:"field"},"Rozmiar grafu:"),a.a.createElement("p",{className:"value"},e),a.a.createElement("input",{className:"field",type:"range",value:e,onChange:function(e){u({type:"SET_GRAPH_SIZE",payload:{size:Number(e.target.value)}})},disabled:n,min:4,max:10})),a.a.createElement("div",{className:"row"},a.a.createElement("p",{className:"field"},"Rozmiar szukanej kliki:"),a.a.createElement("p",{className:"value"},t),a.a.createElement("input",{className:"field",type:"range",value:t,onChange:function(e){u({type:"SET_TARGET_CLIQUE_SIZE",payload:{size:Number(e.target.value)}})},disabled:n,min:3,max:e})),a.a.createElement("div",{className:"buttonsContainer"},a.a.createElement("button",{className:"button",onClick:function(){u({type:"START_GAME"})},disabled:n},"Rozpocznij gr\u0119"),a.a.createElement("button",{className:"button",onClick:function(){u(O())},disabled:!n},"Zako\u0144cz gr\u0119")),i?a.a.createElement("p",{className:"loading",style:{color:"player"===i?"green":"computer"===i?"red":"blue"}},"player"===i?"Cz\u0142owiek wygrywa":"computer"===i?"Komputer wygrywa":"Remis"):n?a.a.createElement("p",{className:"loading"},o?"Komputer my\u015bli":"Twoja kolej",o&&a.a.createElement("span",{id:"loading"})):null)});i.a.render(a.a.createElement((function(){return a.a.createElement(c.a,{store:v},a.a.createElement("div",{className:"app"},a.a.createElement("h1",null,"Gra Ramseya"),a.a.createElement(z,null),a.a.createElement(S,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[197,1,2]]]);
//# sourceMappingURL=main.a120590d.chunk.js.map