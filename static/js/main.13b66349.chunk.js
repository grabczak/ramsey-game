(this["webpackJsonpramsey-game"]=this["webpackJsonpramsey-game"]||[]).push([[0],{197:function(e,n,t){e.exports=t(354)},202:function(e,n,t){},208:function(e,n,t){},217:function(e,n,t){},351:function(e,n,t){},354:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(77),i=t.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(202);var u=t(8),c=t(57),l=t(189),s=t(190),m=t(194),d=t(18),g=function(e){for(var n=[],t=[],r=0;r<e;r++)n.push({id:r});for(var a=0;a<e;a++)for(var o=a+1;o<e;o++)t.push({source:n[a].id,target:n[o].id,team:null});return{nodes:n,edges:t}},f=Object(d.a)({},g(6),{targetCliqueSize:3,isGameRunning:!1,whoIsMoving:"player",winner:null}),p=Object(c.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_GRAPH_SIZE":return Object(d.a)({},e,{},g(n.payload.size),{targetCliqueSize:Math.min(e.targetCliqueSize,n.payload.size),whoIsMoving:"player",winner:null});case"SET_TARGET_CLIQUE_SIZE":return Object(d.a)({},e,{targetCliqueSize:n.payload.size,whoIsMoving:"player",winner:null});case"START_GAME":return Object(d.a)({},e,{edges:e.edges.map((function(e){return Object(d.a)({},e,{team:null})})),isGameRunning:!0,whoIsMoving:"player",winner:null});case"END_GAME":return Object(d.a)({},e,{edges:n.payload.winner?e.edges:e.edges.map((function(e){return Object(d.a)({},e,{team:null})})),isGameRunning:!1,winner:n.payload.winner});case"NEXT_MOVE":return Object(d.a)({},e,{edges:[].concat(Object(m.a)(e.edges.filter((function(e){return e.source!==n.payload.edge.source||e.target!==n.payload.edge.target}))),[n.payload.edge]),whoIsMoving:"player"===n.payload.edge.team?"computer":"player"});default:return e}}}),v=Object(s.createLogger)({collapsed:!0}),h=Object(c.d)(p,Object(c.a)(l.a,v)),y=(t(208),t(191)),b=(t(217),function(e){var n=e.id;return a.a.createElement("div",{className:"node"},a.a.createElement("p",null,n))}),E=t(116),w=t.n(E),N=t(193),j=function(e){return new Promise((function(n){setTimeout(n,1e3*e)}))},M=t(219),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"END_GAME",payload:{winner:e}}},k=function(e){return{type:"NEXT_MOVE",payload:{edge:e}}},I=function(){var e=Object(u.c)((function(e){return e.game.nodes})),n=Object(u.c)((function(e){return e.game.edges})),t=Object(u.c)((function(e){return e.game.isGameRunning})),o=Object(u.c)((function(e){return e.game.whoIsMoving})),i=Object(u.c)((function(e){return e.game.winner})),c=Object(u.b)(),l=Object(r.useMemo)((function(){return e.map((function(n){var t=e.length,r=n.id;return{id:String(r+Math.random()),x:200*Math.cos(-2*Math.PI*r/t+Math.PI/2)+250,y:-200*Math.sin(-2*Math.PI*r/t+Math.PI/2)+250}}))}),[e]),s=Object(r.useMemo)((function(){return n.map((function(e){var n,t;return{source:null===(n=l.find((function(n){var t=n.id;return Math.floor(Number(t))===e.source})))||void 0===n?void 0:n.id,target:null===(t=l.find((function(n){var t=n.id;return Math.floor(Number(t))===e.target})))||void 0===t?void 0:t.id,color:"player"===e.team?"green":"computer"===e.team?"red":"gray"}}))}),[l,n]),m={nodes:l,links:s};return a.a.createElement("div",{className:"graph"},a.a.createElement(y.Graph,{id:"graph",data:m,config:{node:{viewGenerator:function(e){var n=e.id;return a.a.createElement(b,{id:Math.floor(Number(n))})},renderLabel:!1},link:{strokeWidth:3},staticGraph:!0,width:500,height:500},onClickLink:function(e,t){var r=Math.floor(Number(e)),a=Math.floor(Number(t));if("computer"!==o&&!i){var u=n.find((function(e){return e.source===r&&e.target===a}));(null===u||void 0===u?void 0:u.team)||c(function(e,n){return function(){var t=Object(N.a)(w.a.mark((function t(r,a){var o,i,u,c,l,s,m,g;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a().game.targetCliqueSize,r(k({source:e,target:n,team:"player"})),i=a().game.nodes.map((function(e){return e.id})),u=a().game.edges.filter((function(e){return"player"===e.team})).map((function(e){return[e.source,e.target]})),c=a().game.edges.filter((function(e){return"computer"===e.team})).map((function(e){return[e.source,e.target]})),l=a().game.edges.filter((function(e){return null===e.team})),(s=new M.Graph).addNodesFrom(i),s.addEdgesFrom(u),M.graphCliqueNumber(s)!==o){t.next=12;break}return r(O("player")),t.abrupt("return");case 12:return m=function(){return new Promise((function(e){var n=!0,t=!1,r=void 0;try{for(var a,s=function(){var n=a.value,t=!0,r=!1,u=void 0;try{for(var s,m=function(){var t=s.value;if(n>=t)return"continue";var r=new M.Graph;(r.addNodesFrom(i),r.addEdgesFrom(c),r.addEdge(n,t),M.graphCliqueNumber(r)===o&&l.some((function(e){return e.source===n&&e.target===t})))&&e({source:n,target:t,team:"computer",winningEdge:!0})},d=i[Symbol.iterator]();!(t=(s=d.next()).done);t=!0)m()}catch(g){r=!0,u=g}finally{try{t||null==d.return||d.return()}finally{if(r)throw u}}},m=i[Symbol.iterator]();!(n=(a=m.next()).done);n=!0)s()}catch(b){t=!0,r=b}finally{try{n||null==m.return||m.return()}finally{if(t)throw r}}var g=!0,f=!1,p=void 0;try{for(var v,h=function(){var n=v.value,t=!0,r=!1,a=void 0;try{for(var c,s=function(){var t=c.value;if(n>=t)return"continue";var r=new M.Graph;(r.addNodesFrom(i),r.addEdgesFrom(u),r.addEdge(n,t),M.graphCliqueNumber(r)===o&&l.some((function(e){return e.source===n&&e.target===t})))&&e({source:n,target:t,team:"computer",winningEdge:!1})},m=i[Symbol.iterator]();!(t=(c=m.next()).done);t=!0)s()}catch(b){r=!0,a=b}finally{try{t||null==m.return||m.return()}finally{if(r)throw a}}},y=i[Symbol.iterator]();!(g=(v=y.next()).done);g=!0)h()}catch(b){f=!0,p=b}finally{try{g||null==y.return||y.return()}finally{if(f)throw p}}e(Object(d.a)({},l[Math.floor(Math.random()*l.length)],{team:"computer",winningEdge:!1}))}))},t.next=15,m();case 15:if(!(g=t.sent).winningEdge){t.next=24;break}return t.next=19,j(2);case 19:return r(k(g)),r(O("computer")),t.abrupt("return");case 24:if(!g.source&&!g.target){t.next=30;break}return t.next=27,j(2);case 27:r(k(g)),t.next=32;break;case 30:return r(O("draw")),t.abrupt("return");case 32:0===a().game.edges.filter((function(e){return null===e.team})).length&&r(O("draw"));case 34:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(r,a))}}}),!t&&a.a.createElement("div",{className:"overlay"}))},S=(t(351),function(){var e=Object(u.c)((function(e){return e.game.nodes.length})),n=Object(u.c)((function(e){return e.game.targetCliqueSize})),t=Object(u.c)((function(e){return e.game.isGameRunning})),o=Object(u.c)((function(e){return e.game.whoIsMoving})),i=Object(u.c)((function(e){return e.game.winner})),c=Object(u.b)();Object(r.useEffect)((function(){var e=document.getElementById("loading"),n=setInterval((function(){e&&(e.innerHTML.length<=2?e.innerHTML+=".":e.innerHTML="")}),500);return function(){clearInterval(n)}}),[o]);return a.a.createElement("div",{className:"form"},a.a.createElement("div",{className:"row"},a.a.createElement("p",{className:"field"},"Rozmiar grafu:"),a.a.createElement("p",{className:"value"},e),a.a.createElement("input",{className:"field",type:"range",value:e,onChange:function(e){c({type:"SET_GRAPH_SIZE",payload:{size:Number(e.target.value)}})},disabled:t,min:4,max:10})),a.a.createElement("div",{className:"row"},a.a.createElement("p",{className:"field"},"Rozmiar szukanej kliki:"),a.a.createElement("p",{className:"value"},n),a.a.createElement("input",{className:"field",type:"range",value:n,onChange:function(e){c({type:"SET_TARGET_CLIQUE_SIZE",payload:{size:Number(e.target.value)}})},disabled:t,min:3,max:e})),a.a.createElement("div",{className:"buttonsContainer"},a.a.createElement("button",{className:"button",onClick:function(){c({type:"START_GAME"})},disabled:t},"Rozpocznij gr\u0119"),a.a.createElement("button",{className:"button",onClick:function(){c(O())},disabled:!t},"Zako\u0144cz gr\u0119")),i?a.a.createElement("p",{className:"loading",style:{color:"player"===i?"green":"computer"===i?"red":"blue"}},"player"===i?"Cz\u0142owiek wygrywa":"computer"===i?"Komputer wygrywa":"Remis"):t?a.a.createElement("p",{className:"loading"},"computer"===o?"Komputer my\u015bli":"Twoja kolej","computer"===o&&a.a.createElement("span",{id:"loading"})):null)});i.a.render(a.a.createElement((function(){return a.a.createElement(u.a,{store:h},a.a.createElement("div",{className:"app"},a.a.createElement("h1",null,"Gra Ramseya"),a.a.createElement(S,null),a.a.createElement(I,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[197,1,2]]]);
//# sourceMappingURL=main.13b66349.chunk.js.map