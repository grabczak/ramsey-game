(this["webpackJsonpramsey-game"]=this["webpackJsonpramsey-game"]||[]).push([[0],{198:function(e,t,r){e.exports=r(355)},203:function(e,t,r){},209:function(e,t,r){},218:function(e,t,r){},352:function(e,t,r){},355:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(78),u=r.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(203);var c=r(8),i=r(57),s=r(191),l=r(192),m=r(195),d=r(18),f=function(e){for(var t=[],r=[],n=0;n<e;n++)t.push({id:n});for(var a=0;a<e;a++)for(var o=a+1;o<e;o++)r.push({source:t[a].id,target:t[o].id,team:null});return{nodes:t,edges:r}},g=Object(d.a)({},f(6),{targetCliqueSize:3,isGameRunning:!1,whoIsMoving:"player",winner:null}),p=Object(i.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GRAPH_SIZE":return Object(d.a)({},e,{},f(t.payload.size),{targetCliqueSize:Math.min(e.targetCliqueSize,t.payload.size),whoIsMoving:"player",winner:null});case"SET_TARGET_CLIQUE_SIZE":return Object(d.a)({},e,{},f(e.nodes.length),{targetCliqueSize:t.payload.size,whoIsMoving:"player",winner:null});case"START_GAME":return Object(d.a)({},e,{edges:e.edges.map((function(e){return Object(d.a)({},e,{team:null})})),isGameRunning:!0,whoIsMoving:"player",winner:null});case"END_GAME":return Object(d.a)({},e,{edges:t.payload.winner?e.edges:e.edges.map((function(e){return Object(d.a)({},e,{team:null})})),isGameRunning:!1,winner:t.payload.winner});case"NEXT_MOVE":return Object(d.a)({},e,{edges:[].concat(Object(m.a)(e.edges.filter((function(e){return e.source!==t.payload.edge.source||e.target!==t.payload.edge.target}))),[t.payload.edge]),whoIsMoving:"player"===t.payload.edge.team?"computer":"player"});default:return e}}}),v=Object(l.createLogger)({collapsed:!0}),b=Object(i.d)(p,Object(i.a)(s.a,v)),h=(r(209),r(193)),y=(r(218),function(e){var t=e.id;return a.a.createElement("div",{className:"node"},a.a.createElement("p",null,t))}),E=r(66),w=r.n(E),k=r(118),j=r(117),x=function(e){return new Promise((function(t){setTimeout(t,1e3*e)}))},N=r(220),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"END_GAME",payload:{winner:e}}},O=function(e){return{type:"NEXT_MOVE",payload:{edge:e}}},G=function(){var e=Object(c.c)((function(e){return e.game.nodes})),t=Object(c.c)((function(e){return e.game.edges})),r=Object(c.c)((function(e){return e.game.isGameRunning})),o=Object(c.c)((function(e){return e.game.whoIsMoving})),u=Object(c.c)((function(e){return e.game.winner})),i=Object(c.b)(),s=Object(n.useMemo)((function(){return e.map((function(t){var r=e.length,n=t.id;return{id:String(n+Math.random()),x:200*Math.cos(-2*Math.PI*n/r+Math.PI/2)+250,y:-200*Math.sin(-2*Math.PI*n/r+Math.PI/2)+250}}))}),[e]),l=Object(n.useMemo)((function(){return t.map((function(e){var t,r;return{source:null===(t=s.find((function(t){var r=t.id;return Math.floor(Number(r))===e.source})))||void 0===t?void 0:t.id,target:null===(r=s.find((function(t){var r=t.id;return Math.floor(Number(r))===e.target})))||void 0===r?void 0:r.id,color:"player"===e.team?"green":"computer"===e.team?"red":"gray"}}))}),[s,t]),m={nodes:s,links:l};return a.a.createElement("div",{className:"graph"},a.a.createElement(h.Graph,{id:"graph",data:m,config:{node:{viewGenerator:function(e){var t=e.id;return a.a.createElement(y,{id:Math.floor(Number(t))})},renderLabel:!1},link:{strokeWidth:3},staticGraph:!0,width:500,height:500},onClickLink:function(e,r){var n=Math.floor(Number(e)),a=Math.floor(Number(r));if("computer"!==o&&!u){var c=t.find((function(e){return e.source===n&&e.target===a}));(null===c||void 0===c?void 0:c.team)||i(function(e,t){return function(){var r=Object(j.a)(w.a.mark((function r(n,a){var o,u,c,i,s,l,m,f,g,p;return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=a().game.nodes.length,u=a().game.targetCliqueSize,n(O({source:e,target:t,team:"player"})),c=a().game.nodes.map((function(e){return e.id})),i=a().game.edges.filter((function(e){return"player"===e.team})).map((function(e){return[e.source,e.target]})),s=a().game.edges.filter((function(e){return"computer"===e.team})).map((function(e){return[e.source,e.target]})),l=a().game.edges.filter((function(e){return null===e.team})),(m=new N.Graph).addNodesFrom(c),m.addEdgesFrom(i),N.graphCliqueNumber(m)!==u){r.next=13;break}return n(M("player")),r.abrupt("return");case 13:return(f=new N.Graph).addNodesFrom(c),f.addEdgesFrom(s),g=function(){var e=Object(j.a)(w.a.mark((function e(){var t,r,n,a,g,p,v,b,h,y,E,j,x,M,O,G,S,I,T,z,C,R,_,A,q,F,L,P,H,Z,B,W,D,J,K;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==i.length){e.next=6;break}for(t=Object(k.a)(i[0],2),r=t[0],n=t[1],a=[],g=0;g<o;g++)g!==r&&g!==n&&a.push([r,g]);return p=a[Math.floor(Math.random()*a.length)],e.abrupt("return",{source:p[0],target:p[1],team:"computer",winningEdge:!1});case 6:v=!0,b=!1,h=void 0,e.prev=9,y=function(){var e=j.value,t=!0,r=!1,n=void 0;try{for(var a,o=function(){var t=a.value;if(e>=t)return"continue";var r=new N.Graph;return r.addNodesFrom(c),r.addEdgesFrom(s),r.addEdge(e,t),l.some((function(r){return r.source===e&&r.target===t}))&&N.graphCliqueNumber(r)===u?{v:{v:{source:e,target:t,team:"computer",winningEdge:!0}}}:void 0},i=c[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var m=o();switch(m){case"continue":continue;default:if("object"===typeof m)return m.v}}}catch(d){r=!0,n=d}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}},E=c[Symbol.iterator]();case 12:if(v=(j=E.next()).done){e.next=19;break}if("object"!==typeof(x=y())){e.next=16;break}return e.abrupt("return",x.v);case 16:v=!0,e.next=12;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(9),b=!0,h=e.t0;case 25:e.prev=25,e.prev=26,v||null==E.return||E.return();case 28:if(e.prev=28,!b){e.next=31;break}throw h;case 31:return e.finish(28);case 32:return e.finish(25);case 33:M=!0,O=!1,G=void 0,e.prev=36,S=function(){var e=T.value,t=!0,r=!1,n=void 0;try{for(var a,o=function(){var t=a.value;if(e>=t)return"continue";var r=new N.Graph;return r.addNodesFrom(c),r.addEdgesFrom(i),r.addEdge(e,t),N.graphCliqueNumber(r)===u&&l.some((function(r){return r.source===e&&r.target===t}))?{v:{v:{source:e,target:t,team:"computer",winningEdge:!1}}}:void 0},s=c[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var m=o();switch(m){case"continue":continue;default:if("object"===typeof m)return m.v}}}catch(d){r=!0,n=d}finally{try{t||null==s.return||s.return()}finally{if(r)throw n}}},I=c[Symbol.iterator]();case 39:if(M=(T=I.next()).done){e.next=46;break}if("object"!==typeof(z=S())){e.next=43;break}return e.abrupt("return",z.v);case 43:M=!0,e.next=39;break;case 46:e.next=52;break;case 48:e.prev=48,e.t1=e.catch(36),O=!0,G=e.t1;case 52:e.prev=52,e.prev=53,M||null==I.return||I.return();case 55:if(e.prev=55,!O){e.next=58;break}throw G;case 58:return e.finish(55);case 59:return e.finish(52);case 60:if(3!==u){e.next=114;break}C=Array.from(N.degree(m)).sort((function(e,t){return e[1]-t[1]})),R=Array.from(N.degree(f)).sort((function(e,t){return t[1]-e[1]})),_=!0,A=!1,q=void 0,e.prev=66,F=R[Symbol.iterator]();case 68:if(_=(L=F.next()).done){e.next=100;break}P=L.value,H=!0,Z=!1,B=void 0,e.prev=73,W=function(){var e=J.value,t=[P[0],e[0]].sort(),r=Object(k.a)(t,2),n=r[0],a=r[1];if(l.some((function(e){return e.source===n&&e.target===a})))return{v:{source:n,target:a,team:"computer",winningEdge:!1}}},D=C[Symbol.iterator]();case 76:if(H=(J=D.next()).done){e.next=83;break}if("object"!==typeof(K=W())){e.next=80;break}return e.abrupt("return",K.v);case 80:H=!0,e.next=76;break;case 83:e.next=89;break;case 85:e.prev=85,e.t2=e.catch(73),Z=!0,B=e.t2;case 89:e.prev=89,e.prev=90,H||null==D.return||D.return();case 92:if(e.prev=92,!Z){e.next=95;break}throw B;case 95:return e.finish(92);case 96:return e.finish(89);case 97:_=!0,e.next=68;break;case 100:e.next=106;break;case 102:e.prev=102,e.t3=e.catch(66),A=!0,q=e.t3;case 106:e.prev=106,e.prev=107,_||null==F.return||F.return();case 109:if(e.prev=109,!A){e.next=112;break}throw q;case 112:return e.finish(109);case 113:return e.finish(106);case 114:return e.abrupt("return",Object(d.a)({},l[Math.floor(Math.random()*l.length)],{team:"computer",winningEdge:!1}));case 115:case"end":return e.stop()}}),e,null,[[9,21,25,33],[26,,28,32],[36,48,52,60],[53,,55,59],[66,102,106,114],[73,85,89,97],[90,,92,96],[107,,109,113]])})));return function(){return e.apply(this,arguments)}}(),r.next=19,g();case 19:if(!(p=r.sent).winningEdge){r.next=30;break}return r.next=23,x(2);case 23:if(a().game.isGameRunning){r.next=25;break}return r.abrupt("return");case 25:return n(O(p)),n(M("computer")),r.abrupt("return");case 30:if(!p.source&&!p.target){r.next=38;break}return r.next=33,x(2);case 33:if(a().game.isGameRunning){r.next=35;break}return r.abrupt("return");case 35:n(O(p)),r.next=40;break;case 38:return n(M("draw")),r.abrupt("return");case 40:0===a().game.edges.filter((function(e){return null===e.team})).length&&n(M("draw"));case 42:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}(n,a))}}}),!r&&a.a.createElement("div",{className:"overlay"}))},S=(r(352),function(){var e=Object(c.c)((function(e){return e.game.nodes.length})),t=Object(c.c)((function(e){return e.game.targetCliqueSize})),r=Object(c.c)((function(e){return e.game.isGameRunning})),o=Object(c.c)((function(e){return e.game.whoIsMoving})),u=Object(c.c)((function(e){return e.game.winner})),i=Object(c.b)();Object(n.useEffect)((function(){var e=document.getElementById("loading"),t=setInterval((function(){e&&(e.innerHTML.length<=2?e.innerHTML+=".":e.innerHTML="")}),500);return function(){clearInterval(t)}}),[o]);return a.a.createElement("div",{className:"form"},a.a.createElement("div",{className:"row"},a.a.createElement("p",{className:"field"},"Rozmiar grafu:"),a.a.createElement("p",{className:"value"},e),a.a.createElement("input",{className:"field",type:"range",value:e,onChange:function(e){i({type:"SET_GRAPH_SIZE",payload:{size:Number(e.target.value)}})},disabled:r,min:4,max:10})),a.a.createElement("div",{className:"row"},a.a.createElement("p",{className:"field"},"Rozmiar szukanej kliki:"),a.a.createElement("p",{className:"value"},t),a.a.createElement("input",{className:"field",type:"range",value:t,onChange:function(e){i({type:"SET_TARGET_CLIQUE_SIZE",payload:{size:Number(e.target.value)}})},disabled:r,min:3,max:e})),a.a.createElement("div",{className:"buttonsContainer"},a.a.createElement("button",{className:"button",onClick:function(){i({type:"START_GAME"})},disabled:r},"Rozpocznij gr\u0119"),a.a.createElement("button",{className:"button",onClick:function(){i(M())},disabled:!r},"Zako\u0144cz gr\u0119")),u?a.a.createElement("p",{className:"loading",style:{color:"player"===u?"green":"computer"===u?"red":"blue"}},"player"===u?"Cz\u0142owiek wygrywa":"computer"===u?"Komputer wygrywa":"Remis"):r?a.a.createElement("p",{className:"loading"},"computer"===o?"Komputer my\u015bli":"Twoja kolej","computer"===o&&a.a.createElement("span",{id:"loading"})):null)});u.a.render(a.a.createElement((function(){return a.a.createElement(c.a,{store:b},a.a.createElement("div",{className:"app"},a.a.createElement("h1",null,"Gra Ramseya"),a.a.createElement(S,null),a.a.createElement(G,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[198,1,2]]]);
//# sourceMappingURL=main.402ef174.chunk.js.map