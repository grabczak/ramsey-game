(this["webpackJsonpramsey-game"]=this["webpackJsonpramsey-game"]||[]).push([[0],{197:function(e,r,t){e.exports=t(354)},202:function(e,r,t){},208:function(e,r,t){},217:function(e,r,t){},351:function(e,r,t){},354:function(e,r,t){"use strict";t.r(r);var n=t(0),a=t.n(n),o=t(77),i=t.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(202);var u=t(9),l=t(57),c=t(189),s=t(190),d=t(15),m={isGameRunning:!1,isComputerTurn:!1,winner:null},f=t(194),p=Object(d.a)({},g(6));function g(e){for(var r=[],t=[],n=0;n<e;n++)r.push({id:String(n+1+Math.random()),x:200*Math.cos(-2*Math.PI*n/e+Math.PI/2)+250,y:-200*Math.sin(-2*Math.PI*n/e+Math.PI/2)+250});for(var a=0,o=r;a<o.length;a++){var i=o[a],u=!0,l=!1,c=void 0;try{for(var s,d=r[Symbol.iterator]();!(u=(s=d.next()).done);u=!0){var m=s.value;Number(i.id)<Number(m.id)&&t.push({source:i.id,target:m.id,color:"#CCCCCC"})}}catch(f){l=!0,c=f}finally{try{u||null==d.return||d.return()}finally{if(l)throw c}}}return{nodes:r,links:t}}var h={graphSize:6,targetCliqueSize:3};var b=Object(l.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"START_GAME":return Object(d.a)({},e,{isGameRunning:!0,winner:null});case"END_GAME":return Object(d.a)({},e,{isGameRunning:null!==r.payload.winner,isComputerTurn:!1,winner:r.payload.winner});case"ADD_EDGE":return Object(d.a)({},e,{isComputerTurn:"player"===r.payload.affiliation});default:return e}},graph:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"SET_GRAPH_SIZE":return Object(d.a)({},e,{},g(r.payload.size));case"ADD_EDGE":return Object(d.a)({},e,{links:[].concat(Object(f.a)(e.links.filter((function(e){return e.source!==r.payload.source||e.target!==r.payload.target}))),[{source:r.payload.source,target:r.payload.target,color:"player"===r.payload.affiliation?"green":"red"}])});case"END_GAME":return Object(d.a)({},e,{links:null===r.payload.winner?e.links.map((function(e){return Object(d.a)({},e,{color:"#CCCCCC"})})):e.links});default:return e}},options:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"SET_GRAPH_SIZE":return Object(d.a)({},e,{graphSize:r.payload.size,targetCliqueSize:Math.min(e.targetCliqueSize,r.payload.size)});case"SET_TARGET_CLIQUE_SIZE":return Object(d.a)({},e,{targetCliqueSize:r.payload.size});default:return e}}}),v=Object(s.createLogger)({collapsed:!0}),y=Object(l.d)(b,Object(l.a)(c.a,v)),E=(t(208),t(191)),C=(t(217),function(e){var r=e.id;return a.a.createElement("div",{className:"node"},a.a.createElement("p",null,Math.floor(Number(r))))}),N=t(116),w=t.n(N),k=t(193),j=function(e){return new Promise((function(r){setTimeout(r,1e3*e)}))},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"END_GAME",payload:{winner:e}}},O=t(219),S=function(e,r,t){return{type:"ADD_EDGE",payload:{source:e,target:r,affiliation:t}}},G=function(){var e={node:{renderLabel:!1,viewGenerator:function(e){return a.a.createElement(C,{id:e.id})}},link:{strokeWidth:3},staticGraph:!0,width:500,height:500},r=Object(u.c)((function(e){return e.graph})),t=Object(u.c)((function(e){return e.game.isGameRunning})),n=Object(u.c)((function(e){return e.game.isComputerTurn})),o=Object(u.c)((function(e){return e.game.winner})),i=Object(u.b)();return a.a.createElement("div",{className:"graph"},a.a.createElement(E.Graph,{id:"graph",data:r,config:e,onClickLink:function(e,t){if(!n&&!o){var a=r.links.find((function(r){return r.source===e&&r.target===t}));"#CCCCCC"===(null===a||void 0===a?void 0:a.color)&&i(function(e,r){return function(){var t=Object(k.a)(w.a.mark((function t(n,a){var o,i,u,l,c;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n(S(e,r,"player")),(o=new O.Graph).addNodesFrom(a().graph.nodes.map((function(e){return Math.floor(Number(e.id))}))),o.addEdgesFrom(a().graph.links.filter((function(e){return"green"===e.color})).map((function(e){return[Math.floor(Number(e.source)),Math.floor(Number(e.target))]}))),O.graphCliqueNumber(o)!==a().options.targetCliqueSize){t.next=7;break}return n(M("player")),t.abrupt("return");case 7:return i=a().graph.links.filter((function(e){return"#CCCCCC"===e.color})),u=function(){return new Promise((function(e){var r=o.nodes(),t=!0,n=!1,u=void 0;try{for(var l,c=function(){var t=l.value,n=!0,o=!1,i=void 0;try{for(var u,c=function(){var r=u.value;if(t>=r)return"continue";var n=new O.Graph;n.addNodesFrom(a().graph.nodes.map((function(e){return Math.floor(Number(e.id))}))),n.addEdgesFrom(a().graph.links.filter((function(e){return"green"===e.color})).map((function(e){return[Math.floor(Number(e.source)),Math.floor(Number(e.target))]}))),n.addEdge(t,r);var o=a().graph.links.filter((function(e){return"red"===e.color}));if(O.graphCliqueNumber(n)===a().options.targetCliqueSize&&!o.some((function(e){return Math.floor(Number(e.source))===t&&Math.floor(Number(e.target))===r}))){var i,l,c={source:null===(i=a().graph.nodes.find((function(e){return Math.floor(Number(e.id))===t})))||void 0===i?void 0:i.id,target:null===(l=a().graph.nodes.find((function(e){return Math.floor(Number(e.id))===r})))||void 0===l?void 0:l.id};e(c)}},s=r[Symbol.iterator]();!(n=(u=s.next()).done);n=!0)c()}catch(d){o=!0,i=d}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}},s=r[Symbol.iterator]();!(t=(l=s.next()).done);t=!0)c()}catch(d){n=!0,u=d}finally{try{t||null==s.return||s.return()}finally{if(n)throw u}}e(i[Math.floor(Math.random()*i.length)])}))},t.next=11,u();case 11:if(l=t.sent,console.log(l),!l){t.next=19;break}return t.next=16,j(2);case 16:n(S(l.source,l.target,"computer")),t.next=21;break;case 19:return n(M("draw")),t.abrupt("return");case 21:if((c=new O.Graph).addNodesFrom(a().graph.nodes.map((function(e){return Math.floor(Number(e.id))}))),c.addEdgesFrom(a().graph.links.filter((function(e){return"red"===e.color})).map((function(e){return[Math.floor(Number(e.source)),Math.floor(Number(e.target))]}))),O.graphCliqueNumber(c)!==a().options.targetCliqueSize){t.next=27;break}return n(M("computer")),t.abrupt("return");case 27:0===a().graph.links.filter((function(e){return"#CCCCCC"===e.color})).length&&n(M("draw"));case 29:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(e,t))}},y:!0}),!t&&a.a.createElement("div",{className:"overlay"}))},z=(t(351),function(){var e=Object(u.c)((function(e){return e.options.graphSize})),r=Object(u.c)((function(e){return e.options.targetCliqueSize})),t=Object(u.c)((function(e){return e.game.isGameRunning})),o=Object(u.c)((function(e){return e.game.isComputerTurn})),i=Object(u.c)((function(e){return e.game.winner})),l=Object(u.b)();Object(n.useEffect)((function(){var e=document.getElementById("loading"),r=setInterval((function(){e&&(e.innerHTML.length<=2?e.innerHTML+=".":e.innerHTML="")}),500);return function(){clearInterval(r)}}),[o]);return a.a.createElement("div",{className:"form"},a.a.createElement("div",{className:"row"},a.a.createElement("p",{className:"field"},"Rozmiar grafu:"),a.a.createElement("p",{className:"value"},e),a.a.createElement("input",{className:"field",type:"range",value:e,onChange:function(e){l({type:"SET_GRAPH_SIZE",payload:{size:Number(e.target.value)}})},disabled:t,min:4,max:10})),a.a.createElement("div",{className:"row"},a.a.createElement("p",{className:"field"},"Rozmiar szukanej kliki:"),a.a.createElement("p",{className:"value"},r),a.a.createElement("input",{className:"field",type:"range",value:r,onChange:function(e){l({type:"SET_TARGET_CLIQUE_SIZE",payload:{size:Number(e.target.value)}})},disabled:t,min:3,max:e})),a.a.createElement("div",{className:"buttonsContainer"},a.a.createElement("button",{className:"button",onClick:function(){l({type:"START_GAME"})},disabled:t},"Rozpocznij gr\u0119"),a.a.createElement("button",{className:"button",onClick:function(){l(M())},disabled:!t},"Zako\u0144cz gr\u0119")),i?a.a.createElement("p",{className:"loading",style:{color:"player"===i?"green":"computer"===i?"red":"blue"}},"player"===i?"Cz\u0142owiek wygrywa":"computer"===i?"Komputer wygrywa":"Remis"):t?a.a.createElement("p",{className:"loading"},o?"Komputer my\u015bli":"Twoja kolej",o&&a.a.createElement("span",{id:"loading"})):null)});i.a.render(a.a.createElement((function(){return a.a.createElement(u.a,{store:y},a.a.createElement("div",{className:"app"},a.a.createElement("h1",null,"Gra Ramseya"),a.a.createElement(z,null),a.a.createElement(G,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[197,1,2]]]);
//# sourceMappingURL=main.784d748f.chunk.js.map