(this["webpackJsonpramsey-game"]=this["webpackJsonpramsey-game"]||[]).push([[0],{197:function(e,r,t){e.exports=t(354)},202:function(e,r,t){},208:function(e,r,t){},217:function(e,r,t){},351:function(e,r,t){},354:function(e,r,t){"use strict";t.r(r);var n=t(0),a=t.n(n),o=t(77),i=t.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(202);var u=t(8),l=t(57),c=t(190),d=t(194),s=t(15),m=function(e){for(var r=[],t=[],n=0;n<e;n++)r.push({id:n});for(var a=0;a<e;a++)for(var o=a+1;o<e;o++)t.push({source:r[a].id,target:r[o].id,team:null});return{nodes:r,edges:t}},f=Object(s.a)({},m(6),{targetCliqueSize:3,isGameRunning:!1,whoIsMoving:"player",winner:null}),g=Object(l.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"SET_GRAPH_SIZE":return Object(s.a)({},e,{},m(r.payload.size),{targetCliqueSize:Math.min(e.targetCliqueSize,r.payload.size),whoIsMoving:"player",winner:null});case"SET_TARGET_CLIQUE_SIZE":return Object(s.a)({},e,{},m(e.nodes.length),{targetCliqueSize:r.payload.size,whoIsMoving:"player",winner:null});case"START_GAME":return Object(s.a)({},e,{edges:e.edges.map((function(e){return Object(s.a)({},e,{team:null})})),isGameRunning:!0,whoIsMoving:"player",winner:null});case"END_GAME":return Object(s.a)({},e,{edges:r.payload.winner?e.edges:e.edges.map((function(e){return Object(s.a)({},e,{team:null})})),isGameRunning:!1,winner:r.payload.winner});case"NEXT_MOVE":return Object(s.a)({},e,{edges:[].concat(Object(d.a)(e.edges.filter((function(e){return e.source!==r.payload.edge.source||e.target!==r.payload.edge.target}))),[r.payload.edge]),whoIsMoving:"player"===r.payload.edge.team?"computer":"player"});default:return e}}}),v=Object(l.d)(g,Object(l.a)(c.a)),y=(t(208),t(191)),h=(t(217),function(e){var r=e.id;return a.a.createElement("div",{className:"node"},a.a.createElement("p",null,r+1))}),p=t(117),b=t.n(p),E=t(81),w=t(193),j=function(e){return new Promise((function(r){setTimeout(r,1e3*e)}))},N=t(219),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"END_GAME",payload:{winner:e}}},O=function(e){return{type:"NEXT_MOVE",payload:{edge:e}}},S=function(){var e=Object(u.c)((function(e){return e.game.nodes})),r=Object(u.c)((function(e){return e.game.edges})),t=Object(u.c)((function(e){return e.game.isGameRunning})),o=Object(u.c)((function(e){return e.game.whoIsMoving})),i=Object(u.c)((function(e){return e.game.winner})),l=Object(u.b)(),c=Object(n.useMemo)((function(){return e.map((function(r){var t=e.length,n=r.id;return{id:String(n+Math.random()),x:200*Math.cos(-2*Math.PI*n/t+Math.PI/2)+250,y:-200*Math.sin(-2*Math.PI*n/t+Math.PI/2)+250}}))}),[e]),d=Object(n.useMemo)((function(){return r.map((function(e){var r,t;return{source:null===(r=c.find((function(r){var t=r.id;return Math.floor(Number(t))===e.source})))||void 0===r?void 0:r.id,target:null===(t=c.find((function(r){var t=r.id;return Math.floor(Number(t))===e.target})))||void 0===t?void 0:t.id,color:"player"===e.team?"green":"computer"===e.team?"red":"gray"}}))}),[c,r]),m={nodes:c,links:d};return a.a.createElement("div",{className:"graph"},a.a.createElement(y.Graph,{id:"graph",data:m,config:{node:{viewGenerator:function(e){var r=e.id;return a.a.createElement(h,{id:Math.floor(Number(r))})},renderLabel:!1},link:{strokeWidth:3},staticGraph:!0,width:500,height:500},onClickLink:function(e,t){var n=Math.floor(Number(e)),a=Math.floor(Number(t));if("computer"!==o&&!i){var u=r.find((function(e){return e.source===n&&e.target===a}));(null===u||void 0===u?void 0:u.team)||l(function(e,r){return function(){var t=Object(w.a)(b.a.mark((function t(n,a){var o,i,u,l,c,d,m,f,g;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a().game.targetCliqueSize,n(O({source:e,target:r,team:"player"})),i=a().game.nodes.map((function(e){return e.id})),u=a().game.edges.filter((function(e){return"player"===e.team})).map((function(e){return[e.source,e.target]})),l=a().game.edges.filter((function(e){return"computer"===e.team})).map((function(e){return[e.source,e.target]})),c=a().game.edges.filter((function(e){return null===e.team})),(d=new N.Graph).addNodesFrom(i),d.addEdgesFrom(u),(m=new N.Graph).addNodesFrom(i),m.addEdgesFrom(l),N.graphCliqueNumber(d)!==o){t.next=15;break}return n(M("player")),t.abrupt("return");case 15:if(f=function(e,r){return!(e>=r)&&c.some((function(t){return t.source===e&&t.target===r}))},!((g=function(){var e=!0,r=!1,t=void 0;try{for(var n,a=i[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var g=n.value,v=!0,y=!1,h=void 0;try{for(var p,b=i[Symbol.iterator]();!(v=(p=b.next()).done);v=!0){var w=p.value,j=new N.Graph;if(j.addNodesFrom(i),j.addEdgesFrom(l),j.addEdge(g,w),f(g,w)&&N.graphCliqueNumber(j)===o)return{source:g,target:w,winningEdge:!0}}}catch(ar){y=!0,h=ar}finally{try{v||null==b.return||b.return()}finally{if(y)throw h}}}}catch(ar){r=!0,t=ar}finally{try{e||null==a.return||a.return()}finally{if(r)throw t}}var M=!0,O=!1,S=void 0;try{for(var k,x=i[Symbol.iterator]();!(M=(k=x.next()).done);M=!0){var G=k.value,I=!0,C=!1,T=void 0;try{for(var z,R=i[Symbol.iterator]();!(I=(z=R.next()).done);I=!0){var _=z.value,A=new N.Graph;if(A.addNodesFrom(i),A.addEdgesFrom(u),A.addEdge(G,_),f(G,_)&&N.graphCliqueNumber(A)===o)return{source:G,target:_,winningEdge:!1}}}catch(ar){C=!0,T=ar}finally{try{I||null==R.return||R.return()}finally{if(C)throw T}}}}catch(ar){O=!0,S=ar}finally{try{M||null==x.return||x.return()}finally{if(O)throw S}}var q=N.degree(d),F=Array.from(q).sort((function(e,r){return e[1]-r[1]})),L=N.degree(m),P=Array.from(L).sort((function(e,r){return r[1]-e[1]}));if(3===o){if(0===l.length){var H=Object(E.a)(u[0],2),Z=H[0],B=H[1],W=c.filter((function(e){return e.source===Z||e.source===B||e.target===Z||e.target===B})),D=W[Math.floor(Math.random()*W.length)];return Object(s.a)({},D,{winningEdge:!1})}var J=!0,K=!1,Q=void 0;try{for(var U,V=P[Symbol.iterator]();!(J=(U=V.next()).done);J=!0){var X=U.value,$=!0,Y=!1,ee=void 0;try{for(var re,te=F[Symbol.iterator]();!($=(re=te.next()).done);$=!0){var ne=re.value,ae=[X[0],ne[0]].sort(),oe=Object(E.a)(ae,2),ie=oe[0],ue=oe[1];if(f(ie,ue))return{source:ie,target:ue,winningEdge:!1}}}catch(ar){Y=!0,ee=ar}finally{try{$||null==te.return||te.return()}finally{if(Y)throw ee}}}}catch(ar){K=!0,Q=ar}finally{try{J||null==V.return||V.return()}finally{if(K)throw Q}}}if(4===o){if(0===l.length)return Object(s.a)({},c[Math.floor(Math.random()*c.length)],{winningEdge:!1});if(P[0][1]<4){var le=!0,ce=!1,de=void 0;try{for(var se,me=P[Symbol.iterator]();!(le=(se=me.next()).done);le=!0){var fe=se.value,ge=!0,ve=!1,ye=void 0;try{for(var he,pe=F[Symbol.iterator]();!(ge=(he=pe.next()).done);ge=!0){var be=he.value,Ee=[fe[0],be[0]].sort(),we=Object(E.a)(Ee,2),je=we[0],Ne=we[1];if(f(je,Ne))return{source:je,target:Ne,winningEdge:!1}}}catch(ar){ve=!0,ye=ar}finally{try{ge||null==pe.return||pe.return()}finally{if(ve)throw ye}}}}catch(ar){ce=!0,de=ar}finally{try{le||null==me.return||me.return()}finally{if(ce)throw de}}}if(4===l.length){var Me=!0,Oe=!1,Se=void 0;try{for(var ke,xe=F[Symbol.iterator]();!(Me=(ke=xe.next()).done);Me=!0){var Ge=ke.value,Ie=!0,Ce=!1,Te=void 0;try{for(var ze,Re=F[Symbol.iterator]();!(Ie=(ze=Re.next()).done);Ie=!0){var _e=ze.value,Ae=new N.Graph;if(Ae.addNodesFrom(i),Ae.addEdgesFrom(l),Ae.addEdge(Ge[0],_e[0]),f(Ge[0],_e[0])&&3===N.graphCliqueNumber(Ae))return{source:Ge[0],target:_e[0],winningEdge:!1}}}catch(ar){Ce=!0,Te=ar}finally{try{Ie||null==Re.return||Re.return()}finally{if(Ce)throw Te}}}}catch(ar){Oe=!0,Se=ar}finally{try{Me||null==xe.return||xe.return()}finally{if(Oe)throw Se}}}var qe=P[0][1],Fe=0,Le=null,Pe=null,He=!0,Ze=!1,Be=void 0;try{for(var We,De=P[Symbol.iterator]();!(He=(We=De.next()).done);He=!0){var Je=We.value,Ke=!0,Qe=!1,Ue=void 0;try{for(var Ve,Xe=P[Symbol.iterator]();!(Ke=(Ve=Xe.next()).done);Ke=!0){var $e=Ve.value,Ye=Je[1],er=$e[1];if(Ye!==qe&&er!==qe){var rr=Je[1]+$e[1],tr=Je[0],nr=$e[0];rr>=Fe&&f(tr,nr)&&(Fe=rr,Le=tr,Pe=nr)}}}catch(ar){Qe=!0,Ue=ar}finally{try{Ke||null==Xe.return||Xe.return()}finally{if(Qe)throw Ue}}}}catch(ar){Ze=!0,Be=ar}finally{try{He||null==De.return||De.return()}finally{if(Ze)throw Be}}if(null!==Le&&null!==Pe)return{source:Le,target:Pe,winningEdge:!1}}return Object(s.a)({},c[Math.floor(Math.random()*c.length)],{winningEdge:!1})}()).winningEdge||g.source||g.target)){t.next=29;break}return t.next=21,j(2);case 21:if(a().game.isGameRunning){t.next=23;break}return t.abrupt("return");case 23:if(n(O({source:g.source,target:g.target,team:"computer"})),!g.winningEdge){t.next=27;break}return n(M("computer")),t.abrupt("return");case 27:t.next=31;break;case 29:return n(M("draw")),t.abrupt("return");case 31:0===a().game.edges.filter((function(e){return null===e.team})).length&&n(M("draw"));case 33:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}(n,a))}}}),!t&&a.a.createElement("div",{className:"overlay"}))},k=(t(351),function(){var e=Object(u.c)((function(e){return e.game.nodes.length})),r=Object(u.c)((function(e){return e.game.targetCliqueSize})),t=Object(u.c)((function(e){return e.game.isGameRunning})),o=Object(u.c)((function(e){return e.game.whoIsMoving})),i=Object(u.c)((function(e){return e.game.winner})),l=Object(u.b)();Object(n.useEffect)((function(){var e=document.getElementById("loading"),r=setInterval((function(){e&&(e.innerHTML.length<=2?e.innerHTML+=".":e.innerHTML="")}),500);return function(){clearInterval(r)}}),[o]);return a.a.createElement("div",{className:"form"},a.a.createElement("div",{className:"row"},a.a.createElement("p",{className:"field"},"Rozmiar grafu:"),a.a.createElement("p",{className:"value"},e),a.a.createElement("input",{className:"field",type:"range",value:e,onChange:function(e){l({type:"SET_GRAPH_SIZE",payload:{size:Number(e.target.value)}})},disabled:t,min:4,max:10})),a.a.createElement("div",{className:"row"},a.a.createElement("p",{className:"field"},"Rozmiar szukanej kliki:"),a.a.createElement("p",{className:"value"},r),a.a.createElement("input",{className:"field",type:"range",value:r,onChange:function(e){l({type:"SET_TARGET_CLIQUE_SIZE",payload:{size:Number(e.target.value)}})},disabled:t,min:3,max:e})),a.a.createElement("div",{className:"buttonsContainer"},a.a.createElement("button",{className:"button",onClick:function(){l({type:"START_GAME"})},disabled:t},"Rozpocznij gr\u0119"),a.a.createElement("button",{className:"button",onClick:function(){l(M())},disabled:!t},"Zako\u0144cz gr\u0119")),i?a.a.createElement("p",{className:"loading",style:{color:"player"===i?"green":"computer"===i?"red":"blue"}},"player"===i?"Cz\u0142owiek wygrywa":"computer"===i?"Komputer wygrywa":"Remis"):t?a.a.createElement("p",{className:"loading"},"computer"===o?"Komputer my\u015bli":"Twoja kolej","computer"===o&&a.a.createElement("span",{id:"loading"})):null)});i.a.render(a.a.createElement((function(){return a.a.createElement(u.a,{store:v},a.a.createElement("div",{className:"app"},a.a.createElement("h1",null,"Gra Ramseya"),a.a.createElement(k,null),a.a.createElement(S,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[197,1,2]]]);
//# sourceMappingURL=main.01a1a1dd.chunk.js.map